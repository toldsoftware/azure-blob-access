import * as P from "./azure-function-process";

export async function getResponse<T, TQuery, TBody>(main: P.MainEntryPoint<T, TQuery, TBody>, query?: TQuery, body?: TBody): Promise<P.Response<T>> {
    return new Promise<P.Response<T>>((resolve, reject) => {
        let context: P.Context<T> = {
            log: x => console.log(x),
            done: (u, r) => {
                resolve(r);
            }
        };

        main(context, { query: query || {} as TQuery, body: body || {} as TBody });
    });
}